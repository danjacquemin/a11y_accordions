"use strict";!function(t,c,e){var u={};(t.ARIAaccordion=u).NS="ARIAaccordion",u.AUTHOR="Scott O'Hara",u.VERSION="3.2.1",u.LICENSE="https://github.com/scottaohara/accessible_accordions/blob/master/LICENSE";var g="accordion",A=g+"__trigger",h=g+"__panel",b="[data-aria-accordion-heading]",f="[data-aria-accordion-panel]",y=0;u.create=function(){var t,e,a,i,r,l,n="none",o=c.querySelectorAll("[data-aria-accordion]");for(y+=1,l=0;l<o.length;l++){var d;if((t=o[l]).hasAttribute("id")||(t.id="acc_"+y+"-"+l),t.classList.add(g),a=c.querySelectorAll("#"+t.id+"> li").length?(e=c.querySelectorAll("#"+t.id+" li > "+f),c.querySelectorAll("#"+t.id+" li > "+b)):(e=c.querySelectorAll("#"+t.id+" > "+f),c.querySelectorAll("#"+t.id+" > "+b)),t.hasAttribute("data-default")&&(n=t.getAttribute("data-default")),r=t.hasAttribute("data-constant"),t.hasAttribute("data-multi"),t.hasAttribute("data-transition")){var s=t.querySelectorAll(f);for(d=0;d<s.length;d++)s[d].classList.add(h+"--transition")}for(u.setupPanels(t.id,e,n,r),u.setupHeadingButton(a,r),i=c.querySelectorAll("#"+t.id+"> li").length?c.querySelectorAll("#"+t.id+" li > "+b+" ."+A):c.querySelectorAll("#"+t.id+" > "+b+" ."+A),d=0;d<i.length;d++)i[d].addEventListener("click",u.actions),i[d].addEventListener("keydown",u.keytrolls)}},u.setupPanels=function(t,e,a,i){var r,l,n,o,d;for(r=0;r<e.length;r++)n=t+"_panel_"+(r+1),o=a,d=i,(l=e[r]).setAttribute("id",n),s(e[0],!0),l.classList.add(h),"none"!==o&&NaN!==parseInt(o)&&(o<=1?s(e[0],!1):o-1>=e.length?s(e[e.length-1],!1):s(e[o-1],!1)),(d&&"none"===o||NaN===parseInt(o))&&s(e[0],!1)},u.setupHeadingButton=function(t,e){var a,i,r,l,n;for(n=0;n<t.length;n++)for(i=(a=t[n]).nextElementSibling.id,r=c.getElementById(i).getAttribute("aria-hidden"),l=c.createElement("button"),headingNodes=a.cloneNode(!0),a.innerHTML="",a.classList.add("accordion__heading"),l.setAttribute("type","button"),l.setAttribute("aria-controls",i),l.setAttribute("id",i+"_trigger"),l.classList.add(A),"false"===r?(o(l,!0),p(l,!0),e&&l.setAttribute("aria-disabled","true")):(o(l,!1),p(l,!1)),a.appendChild(l);0<headingNodes.childNodes.length;)l.appendChild(headingNodes.childNodes[0])},u.actions=function(t){var e,a=this.id.replace(/_panel.*$/g,""),i=c.getElementById(this.getAttribute("aria-controls"));e=c.querySelectorAll("#"+a+"> li").length?c.querySelectorAll("#"+a+" li > "+b+" ."+A):c.querySelectorAll("#"+a+" > "+b+" ."+A),t.preventDefault(),u.togglePanel(t,a,i,e)},u.togglePanel=function(t,e,a,i){var r,l,n=t.target;if("true"!==n.getAttribute("aria-disabled")&&(r=n.getAttribute("aria-controls"),p(n,"true"),"true"===n.getAttribute("aria-expanded")?(o(n,"false"),s(a,"true")):(o(n,"true"),s(a,"false"),c.getElementById(e).hasAttribute("data-constant")&&d(n,"true")),c.getElementById(e).hasAttribute("data-constant")||!c.getElementById(e).hasAttribute("data-multi")))for(l=0;l<i.length;l++)n!==i[l]&&(p(i[l],"false"),r=i[l].getAttribute("aria-controls"),d(i[l],"false"),o(i[l],"false"),s(c.getElementById(r),"true"))},u.keytrolls=function(t){if(t.target.classList.contains(A)){var e,a=t.keyCode||t.which,i=this.id.replace(/_panel.*$/g,"");switch(e=c.querySelectorAll("#"+i+"> li").length?c.querySelectorAll("#"+i+" li > "+b+" ."+A):c.querySelectorAll("#"+i+" > "+b+" ."+A),a){case 35:t.preventDefault(),e[e.length-1].focus();break;case 36:t.preventDefault(),e[0].focus()}}},u.init=function(){u.create()};var s=function(t,e){t.setAttribute("aria-hidden",e)},o=function(t,e){t.setAttribute("aria-expanded",e)},d=function(t,e){t.setAttribute("aria-disabled",e)},p=function(t,e){t.setAttribute("data-current",e)};u.init()}(window,document);
//# sourceMappingURL=aria.accordion.min.js.map